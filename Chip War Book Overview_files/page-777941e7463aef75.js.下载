(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9037],{2025:(e,t,s)=>{Promise.resolve().then(s.bind(s,2462)),Promise.resolve().then(s.bind(s,9710))},2462:(e,t,s)=>{"use strict";s.d(t,{default:()=>y});var i=s(5155),r=s(5427),a=s(2115),l=s(165),n=s(8175),o=s(6389),c=s(466),d=s(7794),u=s(6766),x=s(5695),m=s(626),f=s(1495),p=s(4821),h=s(2374),w=s(1884);function v(e){var t,s,n;let{project:c,handleFullScreen:d,onUpdate:v,onRemix:j}=e,{emojis:g,registerInteractionCallback:b,interact:y}=(0,f.k)(),[_,N]=(0,a.useState)(null),[k,S]=(0,a.useState)(!1),[E,C]=(0,a.useState)(!1),{track:A}=(0,o.s)(),R=(0,x.useRouter)(),P=(null===(t=c.user)||void 0===t?void 0:t.uid)===l.v1;(0,a.useEffect)(()=>{b(c.project_id,(e,t)=>{v(c,t)})},[c.project_id,b]),(0,a.useEffect)(()=>{k&&N(window.innerWidth<=440)},[k]),(0,a.useEffect)(()=>{S(!0)},[]);let L=e=>{var t,s,i,r;let a=null===(s=c.interaction)||void 0===s?void 0:null===(t=s.status.find(t=>t.interaction_type===e))||void 0===t?void 0:t.status;y(c,e,a?h.f3.Cancel:h.f3.Add),A("emoji_reaction_click",{action:a?"false":"true",project_url:c.project_url,emoji:e,location:"app_page",count:((null===(r=c.interaction)||void 0===r?void 0:null===(i=r.count.find(t=>t.interaction_type===e))||void 0===i?void 0:i.count)||0)+(a?-1:1)})},z=()=>(0,i.jsx)("div",{className:"h-[16px] w-[1px] bg-black/6"});return k&&null!==_?(0,i.jsxs)("div",{className:"flex h-12 w-full max-w-full flex-row items-center justify-between gap-4 px-4",children:[(0,i.jsxs)("div",{id:"left-container",className:"flex shrink-0 flex-row items-center gap-2",children:[(0,i.jsxs)("a",{id:"logo-container",className:"flex flex-row items-center gap-1",href:"https://www.yourware.so",children:[(0,i.jsx)(u.default,{src:"/icons/logo.svg",alt:"Logo",width:24,height:24,priority:!0,className:"text-brand"}),(0,i.jsx)("div",{className:"text-base text-black/95 max-[400px]:hidden lg:text-xl xl:text-[20px]",children:"yourware"})]}),!P&&z(),!P&&(0,i.jsxs)("div",{id:"user-container",className:"flex cursor-pointer flex-row items-center gap-2",onClick:()=>{var e;R.push("".concat("https://www.yourware.so","/profile/").concat(null===(e=c.user)||void 0===e?void 0:e.uid)),A("app_creator_info_click",{project_url:c.project_url})},children:[(0,i.jsx)("img",{src:null===(s=c.user)||void 0===s?void 0:s.photo_url,className:"h-5 w-5 rounded-full bg-gray-200 object-cover"}),!_&&(0,i.jsx)("div",{className:"text-xs font-medium text-black/95",children:null===(n=c.user)||void 0===n?void 0:n.display_name})]})]}),(0,i.jsxs)("div",{className:"flex min-w-0 items-center gap-2",children:[!P&&(0,i.jsxs)("div",{className:"flex shrink-0 items-center gap-2",children:[(0,i.jsxs)("div",{id:"view-count-container",className:"flex flex-row items-center gap-1",children:[(0,i.jsx)(r.tLq,{className:"h-3 w-3 text-black/30"}),(0,i.jsx)("div",{id:"view-count-text",className:"text-xs font-medium tracking-tighter text-black/30",children:(0,w.Z)(c.view_count||0)})]}),z()]}),!P&&(0,i.jsx)("div",{className:"min-w-0 flex-1",children:(()=>{var e,t;let s=(null===(e=c.interaction)||void 0===e?void 0:e.count.filter(e=>e.count>0))||[];return(0,i.jsx)("div",{id:"emoji-container",className:"relative flex flex-row items-center gap-2",children:(0,i.jsx)(m.d,{className:"w-full min-w-0 items-center",emojiCounts:s,emojiStatuses:(null===(t=c.interaction)||void 0===t?void 0:t.status)||[],scrollable:!0,showAddButton:(null==s?void 0:s.length)!=g.length,pickerClassName:"top-[-50px] right-[-8px]",fromMask:"from-[#f6f4f1]",onEmojiClick:e=>{L(e)}})})})()}),(0,i.jsxs)("div",{className:"flex shrink-0 items-center gap-2",children:[!P&&z(),!P&&(0,i.jsxs)("button",{className:"bg-brand flex h-8 cursor-pointer flex-row items-center gap-1 rounded-[10px] px-2.5 text-white hover:opacity-85",onClick:()=>{if(!c.allow_remix){(0,p.S)({title:"Remix Not Supported",description:"Sorry, this project type isn't supported for remixing yet.",confirmText:"Got it",onConfirm:()=>{}});return}C(!0),j(),setTimeout(()=>{C(!1)},2e3)},disabled:E,children:[E?(0,i.jsx)(r.xNY,{className:"h-4 w-4 animate-spin",color:"white"}):(0,i.jsx)(r.xP3,{className:"h-4 w-4",color:"white"}),(0,i.jsx)("span",{className:"text-[14px] font-normal",children:"Remix"})]}),!_&&(0,i.jsx)("div",{id:"full-screen-button",className:"flex h-8 w-8 cursor-pointer items-center justify-center rounded-[10px] border border-black/12 bg-none hover:bg-gray-100",onClick:d,children:(0,i.jsx)(r.nHt,{className:"h-4 w-4",color:"black"})})]})]})]}):(0,i.jsx)("div",{className:"flex h-12 w-full max-w-full flex-row items-center justify-between gap-4 px-4"})}var j=s(1154),g=s(6233);function b(e){let{subdomain:t,onVerificationSuccess:s}=e,[r,l]=(0,a.useState)(["","","",""]),[n,d]=(0,a.useState)("idle"),[u,x]=(0,a.useState)(""),{track:m}=(0,o.s)();(0,a.useEffect)(()=>{m("verify_passcode_page_show",{project_url:window.location.origin})},[]);let f=(0,a.useRef)([]);(0,a.useEffect)(()=>{f.current[0]&&f.current[0].focus()},[]);let p=(e,t)=>{if("Backspace"===e.key&&!r[t]&&t>0){var s;null===(s=f.current[t-1])||void 0===s||s.focus()}},h=(e,t)=>{let s=e.target.value;if(""===s||/^[0-9a-zA-Z]$/.test(s)){let e=[...r];if(e[t]=s,l(e),""!==s&&t<3){var i;null===(i=f.current[t+1])||void 0===i||i.focus()}""!==s&&3===t&&e.every(e=>""!==e)&&v(e.join(""))}},w=e=>{e.preventDefault();let t=e.clipboardData.getData("text");if(/^[0-9a-zA-Z]+$/.test(t)){var s,i;let e=t.split(""),a=[...r];for(let t=0;t<Math.min(4,e.length);t++)a[t]=e[t];if(l(a),a.every(e=>""!==e))null===(s=f.current[3])||void 0===s||s.focus(),v(a.join(""));else{let e=a.findIndex(e=>""===e);-1!==e&&(null===(i=f.current[e])||void 0===i||i.focus())}}},v=async e=>{d("pending");try{let{data:i}=await (0,c.Gp)("/api/project/verify_passcode",{method:"POST",data:{passcode:e,subdomain:t}});(null==i?void 0:i.verified)&&(null==i?void 0:i.iframe_url)?(d("success"),m("verify_passcode_success",{project_url:window.location.origin}),s(null==i?void 0:i.iframe_url)):(d("error"),x("Code mismatch - verify with the owner"))}catch(e){d("error"),x("Verification failed. Please try again.")}};return(0,i.jsxs)("div",{className:"min-h-screen",children:[(0,i.jsx)(g.default,{}),(0,i.jsxs)("div",{className:"flex min-h-[calc(100vh-64px)] flex-col items-center justify-center pb-[15vh]",children:[(0,i.jsx)("h1",{className:"font-montserrat text-transform-capitalize mb-3 text-[40px] leading-[40px] font-medium",children:"Locked Project"}),(0,i.jsx)("p",{className:"",children:"A password is required to view this creation"}),(0,i.jsx)("div",{className:"my-12 flex justify-center space-x-4",children:r.map((e,t)=>(0,i.jsx)("input",{ref:e=>{f.current[t]=e},type:"text",inputMode:"text",autoComplete:"off",maxLength:1,value:e,onChange:e=>h(e,t),onKeyDown:e=>p(e,t),onPaste:0===t?w:void 0,className:"h-24 w-18 rounded-[20px] border-none text-center text-[40px] font-medium [box-shadow:12.171px_4.868px_65.722px_0px_rgba(0,0,0,0.09)] transition-all focus:outline-black",disabled:"pending"===n},t))}),(0,i.jsxs)("div",{className:"h-6 w-auto",children:["pending"===n&&(0,i.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,i.jsx)(j.A,{className:"animate-spin"}),(0,i.jsx)("p",{className:"text-center",children:"Verifying..."})]}),"success"===n&&(0,i.jsx)("p",{className:"text-center text-green-600",children:"âœ¨ Access granted!"}),"error"===n&&(0,i.jsx)("p",{className:"text-center text-[#E60023]",children:u})]})]})]})}function y(e){let{projectViewDetail:t,subdomain:s}=e,u=(0,a.useRef)(null),[x,m]=(0,a.useState)(t.iframe_url),[f,p]=(0,a.useState)(t.need_passcode&&!t.iframe_url),[h,w]=(0,a.useState)(t),[j,g]=(0,a.useState)(!1),{track:y}=(0,o.s)(),{user:_}=(0,n.A)();(0,a.useEffect)(()=>{let e=async()=>{var e;let{data:t}=await (0,c.Gp)("/api/project/view_detail",{method:"GET",data:{subdomain:s},headers:_?{[l.QR]:null!==(e=null==_?void 0:_.uid)&&void 0!==e?e:""}:void 0});m((null==t?void 0:t.iframe_url)||""),p(!1)};t.need_passcode&&!t.iframe_url&&e()},[t.need_passcode,t.iframe_url]),(0,a.useEffect)(()=>{x&&(y("app_page_view",{project_url:window.location.origin}),(0,d.Fe)(t.project_id,"view"))},[x]);let N=async()=>{window.open("".concat("https://www.yourware.so","/route/remix/").concat(t.project_id,"?remix_count=").concat(t.remix_count,"&project_url=").concat(encodeURIComponent(t.project_url)),"_blank")},k=()=>{g(!j)};return((0,a.useEffect)(()=>{let e=e=>{"Escape"===e.key&&j&&g(!1)};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[j]),f)?(0,i.jsxs)("div",{className:"flex min-h-screen flex-col items-center justify-center",children:[(0,i.jsx)(r.xNY,{className:"mx-auto mb-3 h-10 w-10 animate-spin text-gray-400"}),(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"Loading..."})]}):t.need_passcode&&!x?(0,i.jsx)(b,{subdomain:s,onVerificationSuccess:e=>{m(e)}}):(0,i.jsxs)("div",{className:"relative flex min-h-screen flex-col overflow-hidden",style:{minHeight:"100dvh"},children:[(0,i.jsx)("iframe",{ref:u,src:x,className:"mx-2 mt-2 mb-12 flex-1 overflow-hidden rounded-lg border border-black/6 transition-all duration-300 ".concat(j?"!m-0 !rounded-none":""),loading:"eager",allowFullScreen:!0,seamless:!0,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; camera; microphone; geolocation; fullscreen; payment",sandbox:"allow-same-origin allow-scripts allow-forms allow-popups allow-pointer-lock allow-modals allow-downloads allow-top-navigation"}),(0,i.jsx)("button",{onClick:k,className:"fixed right-2 bottom-2 z-50 cursor-pointer rounded-[10px] border border-black/12 bg-white p-2 transition-all duration-300 hover:bg-gray-100 ".concat(j?"translate-y-0 opacity-100":"translate-y-4 opacity-0"),children:(0,i.jsx)(r.a3o,{className:"h-4 w-4"})}),(0,i.jsx)("div",{className:"fixed bottom-0 left-0 z-50 w-full transition-all duration-300 ".concat(j?"translate-y-full":"translate-y-0"),children:(0,i.jsx)(v,{project:h,handleFullScreen:k,onRemix:N,onUpdate:(e,s)=>{w({...e,need_passcode:t.need_passcode,interaction:s})}})})]})}},4821:(e,t,s)=>{"use strict";s.d(t,{B:()=>a,S:()=>r});let i=()=>{},r=e=>{i(e)},a=e=>i=e},9710:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});var i=s(5155),r=s(6874),a=s.n(r);s(2115);var l=s(6233);function n(e){let{error:t="Something went wrong!",reset:s}=e;return(0,i.jsxs)("div",{className:"flex min-h-screen flex-col",children:[(0,i.jsx)(l.default,{hideRight:!0}),(0,i.jsxs)("main",{className:"mb-20 flex w-full flex-1 flex-col items-center justify-center px-6 sm:px-4",children:[(0,i.jsx)("h2",{className:"text-center text-[28px]/8 sm:text-[32px]/9 md:text-[40px]/10",children:t}),(0,i.jsx)("p",{className:"mt-3 text-center text-sm text-black/45 sm:text-base",children:"Please try again later or contact support if the problem persists."}),(0,i.jsxs)("div",{className:"mt-12 flex gap-4 sm:mt-16 md:mt-20",children:[(0,i.jsx)("button",{onClick:()=>{s?s():window.location.reload()},className:"shine-effect flex h-12 w-36 cursor-pointer items-center justify-center rounded-full bg-black/95 text-sm text-white sm:h-14 sm:w-40 sm:text-base",children:"Try Again"}),(0,i.jsx)(a(),{href:"https://www.yourware.so",className:"shine-effect flex h-12 w-36 cursor-pointer items-center justify-center rounded-full border border-black/95 text-sm text-black/95 sm:h-14 sm:w-40 sm:text-base",children:"Go Home"})]})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[8229,8823,8888,9066,3464,9851,6259,4277,5929,8935,6233,2764,8441,1684,7358],()=>t(2025)),_N_E=e.O()}]);